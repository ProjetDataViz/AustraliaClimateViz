<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
</head>
<body>

<h1>Impact el nino sur l'Australie</h1>
<p>Jaune: avec el nino. <br> Bleu: sans el nino</p>
<div class="dropdown">
 <button class="boutonmenuprincipal">Choix station</button>
 <div class="dropdown-child">
 <a href=file:///home/vic/dataviz/index.html?city=Adelaide>Visualisation Adelaide</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Albany>Visualisation Albany</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Albury>Visualisation Albury</a><br>
<a href=file:///home/vic/dataviz/index.html?city=AliceSprings>Visualisation AliceSprings</a><br>
<a href=file:///home/vic/dataviz/index.html?city=BadgerysCreek>Visualisation BadgerysCreek</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Ballarat>Visualisation Ballarat</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Bendigo>Visualisation Bendigo</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Brisbane>Visualisation Brisbane</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Cairns>Visualisation Cairns</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Canberra>Visualisation Canberra</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Cobar>Visualisation Cobar</a><br>
<a href=file:///home/vic/dataviz/index.html?city=CoffsHarbour>Visualisation CoffsHarbour</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Dartmoor>Visualisation Dartmoor</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Darwin>Visualisation Darwin</a><br>
<a href=file:///home/vic/dataviz/index.html?city=GoldCoast>Visualisation GoldCoast</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Hobart>Visualisation Hobart</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Launceston>Visualisation Launceston</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Melbourne>Visualisation Melbourne</a><br>
<a href=file:///home/vic/dataviz/index.html?city=MelbourneAirport>Visualisation MelbourneAirport</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Mildura>Visualisation Mildura</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Moree>Visualisation Moree</a><br>
<a href=file:///home/vic/dataviz/index.html?city=MountGambier>Visualisation MountGambier</a><br>
<a href=file:///home/vic/dataviz/index.html?city=MountGinini>Visualisation MountGinini</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Newcastle>Visualisation Newcastle</a><br>
<a href=file:///home/vic/dataviz/index.html?city=NorahHead>Visualisation NorahHead</a><br>
<a href=file:///home/vic/dataviz/index.html?city=NorfolkIsland>Visualisation NorfolkIsland</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Nuriootpa>Visualisation Nuriootpa</a><br>
<a href=file:///home/vic/dataviz/index.html?city=PearceRAAF>Visualisation PearceRAAF</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Penrith>Visualisation Penrith</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Perth>Visualisation Perth</a><br>
<a href=file:///home/vic/dataviz/index.html?city=PerthAirport>Visualisation PerthAirport</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Portland>Visualisation Portland</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Richmond>Visualisation Richmond</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Sale>Visualisation Sale</a><br>
<a href=file:///home/vic/dataviz/index.html?city=SalmonGums>Visualisation SalmonGums</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Sydney>Visualisation Sydney</a><br>
<a href=file:///home/vic/dataviz/index.html?city=SydneyAirport>Visualisation SydneyAirport</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Townsville>Visualisation Townsville</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Tuggeranong>Visualisation Tuggeranong</a><br>
<a href=file:///home/vic/dataviz/index.html?city=WaggaWagga>Visualisation WaggaWagga</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Walpole>Visualisation Walpole</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Watsonia>Visualisation Watsonia</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Williamtown>Visualisation Williamtown</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Witchcliffe>Visualisation Witchcliffe</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Wollongong>Visualisation Wollongong</a><br>
<a href=file:///home/vic/dataviz/index.html?city=Woomera>Visualisation Woomera</a><br>
 </div>
 </div>
</body>
</html>
<meta charset="utf-8">
<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.5.0/pure-min.css">
<link rel="stylesheet" href="https://rawgit.com/tpreusse/radar-chart-d3/master/src/radar-chart.css">

<style>

body {
  padding: 20px;

}
</style>

<style>
.radar-chart .area {
  fill-opacity: 0.7;
}
.radar-chart.focus .area {
  fill-opacity: 0.3;
}
.radar-chart.focus .area.focused {
  fill-opacity: 0.9;
}
.area.avecNino, .avecNino .circle {
  fill: #FFD700;
  stroke: none;
}
.area.sansNino, .sansNino .circle {
  fill: #ADD8E6;
  stroke: none;
}
.boutonmenuprincipal {
background-color: #e83737;
color: white;
border: none;
cursor: pointer;
padding:20px;
margin-top:20px;
font-size: 30px;
}
.boutonmenuprincipal:hover {
background-color: #ff4444;
}
.dropdown {
position: relative;
display: inline-block;
}
.dropdown-child {
display: none;
background-color: #f28c8c;
min-width: 50px;
}
.dropdown-child a {
color: white;
padding: 20px;
text-decoration: none;
display: block;
}
.dropdown:hover .dropdown-child {
display: block;
}
</style>

<script src="http://d3js.org/d3.v3.js"></script>
<script src="script.js"></script>

<script>

RadarChart.defaultConfig.color = function() {};
RadarChart.defaultConfig.radius = 3;
RadarChart.defaultConfig.w = 400;
RadarChart.defaultConfig.h = 400;
</script>

<span></span>

<script>
var data = [
  {
    className: 'avecNino', 
    axes: [
      {axis: "temperature", value: 13}, 
      {axis: "humidite", value: 6}, 
      {axis: "pression", value: 5},  
      {axis: "Rainfall", value: 9},  
      {axis: "WindGustSpeed", value: 2}
    ]
  },
  {
    className: 'sansNino',
    axes: [
      {axis: "temperature", value: 6}, 
      {axis: "humidite", value: 7}, 
      {axis: "pression", value: 10},  
      {axis: "Rainfall", value: 13},  
      {axis: "WindGustSpeed", value: 9}
    ]
  }
];

function getData() {
    
    return data.map(function(d) {
      
      return {
        className: d.className,
        axes: d.axes.map(function(axis) {
          return {axis: axis.axis, value: axis.value};
        })
      };
    });

  
}
function getData2(dataset) {
  console.log(data[1].axes[0].value);
  //data[1].axes[0].value;
  console.log(parseFloat(dataset[0].temperature));
  data[1].axes[0].value=parseFloat(dataset[0].temperature);
  data[1].axes[1].value=parseFloat(dataset[0].humidite);
  data[1].axes[2].value=parseFloat(dataset[0].pression);
  data[1].axes[3].value=parseFloat(dataset[0].Rainfall);
  data[1].axes[4].value=parseFloat(dataset[0].WindGustSpeed);
  data[0].axes[0].value=parseFloat(dataset[1].temperature);
  data[0].axes[1].value=parseFloat(dataset[1].humidite);
  data[0].axes[2].value=parseFloat(dataset[1].pression);
  data[0].axes[3].value=parseFloat(dataset[1].Rainfall);
  data[0].axes[4].value=parseFloat(dataset[1].WindGustSpeed);
  return data;
    

  
}


function getVal(tipe,varia){
  //Ici il faut ecrire une fonction qui s'occupe d'aller chercher dans les donnes la bonne variable
  //ici on recup la station:
  var retour =4;
  param = extractUrlParams();
  ville = param['city'];
  csv='';
  var i=0;
  if (tipe=="avecNino"){
    lien="avecNino.csv";
    
  }else{
    lien="sansNino.csv";
  }
  
  d3.csv(lien, function(dot) {
    //console.log(data[1]);
    console.log(ville)
    console.log(varia)
    for (var j=0; j<dot.length; j++){
      if (dot[j].Location==ville){
        i=j
      }
    }
    updateData(tipe,varia,dot[i].temperature);
    dot.temperature=1;
    dot.test=1;
    return 1;
  });
  console.log("jfjfjf"+dot.temperature);
  return 4;
}
/**
 * Fonction de récupération des paramètres GET de la page
 * @return Array Tableau associatif contenant les paramètres GET
 */
function extractUrlParams(){  
  var t = location.search.substring(1).split('&');
  var f = [];
  for (var i=0; i<t.length; i++){
    var x = t[ i ].split('=');
    f[x[0]]=x[1];
  }
  return f;
}
</script>

<script>
var chart = RadarChart.chart();
var cfg = chart.config(); // retrieve default config
var svg = d3.select('body').append('svg')
  .attr('width', cfg.w + cfg.w + 50)
  .attr('height', cfg.h + cfg.h / 4);

//svg.append('g').classed('single', 1).datum(getData()).call(chart);

param = extractUrlParams();
  ville = param['city'];
d3.csv("donnees.csv", function(d) {
  if (d.Location==ville){
    return {
      nom : d.nino,
      temperature: d.temperature,
      humidite :d.humidite,
      pression :d.pression,
      Rainfall :d.Rainfall,
      WindGustSpeed :d.WindGustSpeed
    };
  }
}, function(error, dataset) {
  svg.append('g').classed('single', 1).datum(getData2(dataset)).call(chart);
});

</script>

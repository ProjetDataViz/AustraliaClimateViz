<!DOCTYPE html>
<html>
<head>
<title>El nino en australie</title>
</head>
<body>

<h1>Impact el nino sur l'Australie</h1>
<p>Jaune: avec el nino. <br> Bleu: sans el nino</p>
<p>Selectionner une station:</p>

<div class="dropdown">
 <button class="boutonmenuprincipal">Choix station</button>
 <div class="dropdown-child">
 <a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Adelaide>VisualisationAdelaide </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Albany>VisualisationAlbany </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Albury>VisualisationAlbury </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=AliceSprings>VisualisationAliceSprings </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=BadgerysCreek>VisualisationBadgerysCreek </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Ballarat>VisualisationBallarat </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Bendigo>VisualisationBendigo </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Brisbane>VisualisationBrisbane </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Cairns>VisualisationCairns </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Canberra>VisualisationCanberra </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Cobar>VisualisationCobar </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=CoffsHarbour>VisualisationCoffsHarbour </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Dartmoor>VisualisationDartmoor </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Darwin>VisualisationDarwin </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=GoldCoast>VisualisationGoldCoast </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Hobart>VisualisationHobart </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Launceston>VisualisationLaunceston </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Melbourne>VisualisationMelbourne </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=MelbourneAirport>VisualisationMelbourneAirport </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Mildura>VisualisationMildura </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Moree>VisualisationMoree </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=MountGambier>VisualisationMountGambier </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=MountGinini>VisualisationMountGinini </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Newcastle>VisualisationNewcastle </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=NorahHead>VisualisationNorahHead </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=NorfolkIsland>VisualisationNorfolkIsland </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Nuriootpa>VisualisationNuriootpa </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=PearceRAAF>VisualisationPearceRAAF </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Penrith>VisualisationPenrith </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Perth>VisualisationPerth </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=PerthAirport>VisualisationPerthAirport </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Portland>VisualisationPortland </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Richmond>VisualisationRichmond </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Sale>VisualisationSale </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=SalmonGums>VisualisationSalmonGums </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Sydney>VisualisationSydney </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=SydneyAirport>VisualisationSydneyAirport </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Townsville>VisualisationTownsville </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Tuggeranong>VisualisationTuggeranong </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=WaggaWagga>VisualisationWaggaWagga </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Walpole>VisualisationWalpole </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Watsonia>VisualisationWatsonia </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Williamtown>VisualisationWilliamtown </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Witchcliffe>VisualisationWitchcliffe </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Wollongong>VisualisationWollongong </a><br>
<a href=https://projetdataviz.github.io/AustraliaClimateViz/spider?city=Woomera>VisualisationWoomera </a><br>
 </div>
 </div>

</body>
</html>
<meta charset="utf-8">
<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.5.0/pure-min.css">
<link rel="stylesheet" href="https://rawgit.com/tpreusse/radar-chart-d3/master/src/radar-chart.css">

<style>

body {
  padding: 20px;

}
</style>

<style>
.radar-chart .area {
  fill-opacity: 0.7;
}
.radar-chart.focus .area {
  fill-opacity: 0.3;
}
.radar-chart.focus .area.focused {
  fill-opacity: 0.9;
}
.area.avecNino, .avecNino .circle {
  fill: #FFD700;
  stroke: none;
}
.area.sansNino, .sansNino .circle {
  fill: #ADD8E6;
  stroke: none;
}
.boutonmenuprincipal {
background-color: #e83737;
color: white;
border: none;
cursor: pointer;
padding:20px;
margin-top:20px;
font-size: 30px;
}
.boutonmenuprincipal:hover {
background-color: #ff4444;
}
.dropdown {
position: relative;
display: inline-block;
}
.dropdown-child {
display: none;
background-color: #f28c8c;
min-width: 50px;
}
.dropdown-child a {
color: white;
padding: 20px;
text-decoration: none;
display: block;
}
.dropdown:hover .dropdown-child {
display: block;
}
</style>

<script src="http://d3js.org/d3.v3.js"></script>
<script src="script.js"></script>

<script>

RadarChart.defaultConfig.color = function() {};
RadarChart.defaultConfig.radius = 3;
RadarChart.defaultConfig.w = 400;
RadarChart.defaultConfig.h = 400;
</script>

<span></span>

<script>
var data = [
  {
    className: 'avecNino', 
    axes: [
      {axis: "temperature", value: 13}, 
      {axis: "humidite", value: 6}, 
      {axis: "pression", value: 5},  
      {axis: "Rainfall", value: 9},  
      {axis: "WindGustSpeed", value: 2}
    ]
  },
  {
    className: 'sansNino',
    axes: [
      {axis: "temperature", value: 6}, 
      {axis: "humidite", value: 7}, 
      {axis: "pression", value: 10},  
      {axis: "Rainfall", value: 13},  
      {axis: "WindGustSpeed", value: 9}
    ]
  }
];

function getData() {
    
    return data.map(function(d) {
      
      return {
        className: d.className,
        axes: d.axes.map(function(axis) {
          return {axis: axis.axis, value: axis.value};
        })
      };
    });

  
}
function getData2(dataset) {
  console.log(data[1].axes[0].value);
  //data[1].axes[0].value;
  console.log(parseFloat(dataset[0].temperature));
  data[1].axes[0].value=parseFloat(dataset[0].temperature);
  data[1].axes[1].value=parseFloat(dataset[0].humidite);
  data[1].axes[2].value=parseFloat(dataset[0].pression);
  data[1].axes[3].value=parseFloat(dataset[0].Rainfall);
  data[1].axes[4].value=parseFloat(dataset[0].WindGustSpeed);
  data[0].axes[0].value=parseFloat(dataset[1].temperature);
  data[0].axes[1].value=parseFloat(dataset[1].humidite);
  data[0].axes[2].value=parseFloat(dataset[1].pression);
  data[0].axes[3].value=parseFloat(dataset[1].Rainfall);
  data[0].axes[4].value=parseFloat(dataset[1].WindGustSpeed);
  return data;
    

  
}


function getVal(tipe,varia){
  //Ici il faut ecrire une fonction qui s'occupe d'aller chercher dans les donnes la bonne variable
  //ici on recup la station:
  var retour =4;
  param = extractUrlParams();
  ville = param['city'];
  csv='';
  var i=0;
  if (tipe=="avecNino"){
    lien="avecNino.csv";
    
  }else{
    lien="sansNino.csv";
  }
  
  d3.csv(lien, function(dot) {
    //console.log(data[1]);
    console.log(ville)
    console.log(varia)
    for (var j=0; j<dot.length; j++){
      if (dot[j].Location==ville){
        i=j
      }
    }
    updateData(tipe,varia,dot[i].temperature);
    dot.temperature=1;
    dot.test=1;
    return 1;
  });
  console.log("jfjfjf"+dot.temperature);
  return 4;
}
/**
 * Fonction de récupération des paramètres GET de la page
 * @return Array Tableau associatif contenant les paramètres GET
 */
function extractUrlParams(){  
  var t = location.search.substring(1).split('&');
  var f = [];
  for (var i=0; i<t.length; i++){
    var x = t[ i ].split('=');
    f[x[0]]=x[1];
  }
  return f;
}
</script>

<script>
var chart = RadarChart.chart();
var cfg = chart.config(); // retrieve default config
var svg = d3.select('body').append('svg')
  .attr('width', cfg.w + cfg.w + 50)
  .attr('height', cfg.h + cfg.h / 4);

//svg.append('g').classed('single', 1).datum(getData()).call(chart);
param = extractUrlParams();
ville = param['city'];
d3.csv("donnees.csv", function(d) {
  if (d.Location==ville){
    return {
      nom : d.nino,
      temperature: d.temperature,
      humidite :d.humidite,
      pression :d.pression,
      Rainfall :d.Rainfall,
      WindGustSpeed :d.WindGustSpeed
    };
  }
}, function(error, dataset) {
  svg.append('g').classed('single', 1).datum(getData2(dataset)).call(chart);
});


</script>


